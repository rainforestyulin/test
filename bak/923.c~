#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
/*int twoSumMulti(int *arr,int arrSize,int target){
    int totalnum=0;
    for(int i=0,j=arrSize-1;i<j;){
        if(*(arr+i)+*(arr+j)<target){
            while(*(arr+i+1)==*(arr+i)&&i+1<j){
                i++;
            };
//            printf("i++\n");
            continue;
        }else{
            for(int k=j;i<k;k--){
                if(*(arr+i)+*(arr+k)==target){

                    while(*(arr+i+1)==*(arr+i)&&i+1<j){
                        totalnum++;
                        i++;
                    };
                
                }else if(*(arr+i)+*(arr+k)<target){
                    break;
                }
            }
            i++;
  //          printf("else\n");
        }
    }
    return totalnum;
}*/
unsigned long long twoSumMulti(int *arr,int arrSize,int target){
    unsigned long long  totalnum=0;
    for(int i=0,j=arrSize-1;i<j;){
        if(*(arr+i)+*(arr+j)<target){
            while(*(arr+i+1)==*(arr+i)&&i+1<j){
                i++;
            };
            i++;
            continue;
        }else{
            for(int k=j;i<k;k--){ 
                bool find=false;      
                if(*(arr+i)+*(arr+k)==target){
                         totalnum++;
                         find=true;
                    //totalnum++;
                }else if(*(arr+i)+*(arr+k)<target){
                        if(find==true){
                            j=k;
                        }
                   //j=k;
                    break;
                }
            }
            i++;
        }
    }
    return totalnum;
}

int threeSumMulti(int* arr, int arrSize, int target){
    if(arrSize<3){
        return 0;
    }
    paixu(arr,arrSize);
    unsigned long long  totalnum=0;
    for(int i=0;i<arrSize-2;){
        if(*(arr+i)+*(arr+i+1)+*(arr+i+1+1)>target){
            break;
        }else if(*(arr+i)+*(arr+arrSize-1)+*(arr+arrSize-2)<target){
            i++;
            continue;
        }else{
            totalnum=totalnum+twoSumMulti(arr+i+1,arrSize-i-1,target-*(arr+i));
            i++;
        }
    }
    return totalnum%10000000007;
}
int main(){
    int arr[3000]={0};
    printf("%d", threeSumMulti(&arr[0],3000,0));

}
